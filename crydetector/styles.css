:root{
  --bg: #0d1117;
  --panel: #161b22;
  --text: #e6edf3;
  --muted: #9da7b3;
  --accent: #3b82f6;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body{
  margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  color: var(--text);
  transition: background-color 120ms ease-in-out;
}

/* Brighter but not too bright */
body.alert{ background: #b91c1c; }

header{
  padding: 24px 20px 8px;
  border-bottom: 1px solid #1f2937;
}
h1{ margin: 0 0 4px; font-size: 20px; }
.sub{ margin:0; color: var(--muted); font-size: 13px; }

main{
  padding: 16px 20px 24px;
  max-width: 1000px; margin: 0 auto;
}

.controls{
  background: var(--panel);
  padding: 12px;
  border: 1px solid #1f2937;
  border-radius: 14px;
}

.controls .row{
  display: flex; gap: 8px; align-items: center; margin-bottom: 10px;
}

button{
  border: 1px solid #263141; background: #111827; color: var(--text);
  padding: 8px 12px; border-radius: 10px; cursor: pointer;
}
button.primary{ background: var(--accent); border-color: var(--accent); color: white; }
button.ghost{ background: transparent; }
button:disabled{ opacity: 0.55; cursor: not-allowed; }

.status{ margin-left: 8px; color: var(--muted); font-size: 13px; }

.grid{
  display: grid; gap: 10px;
  grid-template-columns: repeat(6, minmax(120px, 1fr));
}
@media (max-width: 980px){
  .grid{ grid-template-columns: repeat(2, minmax(150px, 1fr)); }
}

label{
  display:flex; flex-direction:column; gap:6px; font-size: 12px; color: var(--muted);
}
label input, label textarea{
  padding: 8px 10px; border-radius: 10px; border: 1px solid #263141; background: #0b1220; color: var(--text);
}

details.advanced{ margin-top: 8px; }
label.wide{ margin-top: 10px; }
label.wide input{ width: 100%; }
.small{ font-size: 12px; }
.muted{ color: var(--muted); }

.grid-adv{
  display: grid; gap: 10px; margin-top: 10px;
  grid-template-columns: repeat(3, minmax(140px, 1fr));
}
@media (max-width: 980px){
  .grid-adv{ grid-template-columns: repeat(2, minmax(140px, 1fr)); }
}
@media (max-width: 620px){
  .grid-adv{ grid-template-columns: 1fr; }
}

.plot{
  margin-top: 16px;
  background: var(--panel);
  padding: 12px;
  border: 1px solid #1f2937;
  border-radius: 14px;
}

.legend{
  display:flex; gap:16px; align-items:center; color: var(--muted); font-size:12px; margin-top:8px;
}
.key{ display:inline-block; width: 12px; height: 3px; border-radius: 2px; background: #666; margin-right:6px; transform: translateY(-1px); }
.key.raw{ background: #60a5fa; }   /* blue */
.key.sm{  background: #ef4444; }   /* red (smoothed) */
.key.thr{ background: #f97316; }   /* orange */

.toggles{
  margin-top: 8px; display: flex; gap: 16px; flex-wrap: wrap; color: var(--muted); font-size: 12px;
}
.toggles input{ margin-right: 6px; }

.peak{
  margin-top: 8px; color: var(--muted); font-size: 12px;
}

footer{
  margin: 20px auto 40px; max-width: 1000px; padding: 8px 20px; color: var(--muted); font-size: 12px; text-align: center;
}
